const visita = {
  _id: {
    $oid: "64b7eb5329961c3075b7a511",
  },
  nomeVendedor: "GLAIDSTONE JOSÉ",
  telefoneVendedor: "(34) 99262-7639",
  nomeDoCliente: "TESTE",
  telefoneDoCliente: "(34) 99664-6994",
  codigoSVB: "CRM-53",
  cidade: "GURINHATÃ",
  cep: "38310-000",
  bairro: "CENTRO",
  logradouro: "RUA CORNELIO ANTONIO PEREIRA ",
  numeroResidencia: 214,
  tipoInversor: "MICRO-INVERSOR",
  qtdeInversor: "3",
  potInversor: "1800",
  marcaInversor: "HOYMILES",
  qtdeModulos: "12",
  potModulos: "550",
  marcaModulos: "MONOCRISTALINO",
  obsVisita:
    "parte da frente estrutura de madeira, parte de tras estrutura metalica. \nja foi comentado sobre a possivel poda dos coqueiros do fundo",
  tipoDeLaudo: "ESTUDO SIMPLES (36 HORAS)",
  tipoDeSolicitacao: "VISITA TÉCNICA REMOTA - URBANA",
  amperagem: "40A",
  tipoDisjuntor: "MONOFÁSICO",
  ramalEntrada: "AÉREO",
  ramalSaida: "AÉREO",
  tipoPadrao: "CONTRA À REDE - POSTE DO OUTRO LADO DA RUA",
  numeroMedidor: "AML211015990",
  estruturaMontagem: "TELHADO CONVENCIONAL",
  tipoEstrutura: "MADEIRA",
  tipoTelha: "FRANCESA",
  telhasReservas: "NÃO",
  orientacaoEstrutura: "00L",
  distanciaSistemaQuadro: "5 METROS",
  distanciaInversorRoteador: "5 METROS",
  obsInstalacao: "",
  localInstalacaoInversor: "MICRO-INVERSOR",
  links: [
    {
      title: "LOCALIZAÇÃO",
      link: "https://firebasestorage.googleapis.com/v0/b/sistemaampere.appspot.com/o/clientes%2FRODRIGO%20QUEIROZ-64b57fb9a14dd55e4c7f70d0%2Flocalizacao8264?alt=media&token=e287cb20-339b-40da-9b38-dc577cd9b538",
      format: "IMAGEM(.JPEG)",
    },
    {
      title: "FOTO DO PADRÃO",
      link: "https://firebasestorage.googleapis.com/v0/b/sistemaampere.appspot.com/o/clientes%2FRODRIGO%20QUEIROZ-64b57fb9a14dd55e4c7f70d0%2FfotoPadrao9526?alt=media&token=0d44dc20-c7a4-4ca8-82ca-456b78806051",
      format: "IMAGEM (.PNG)",
    },
    {
      title: "FOTO DO DISJUNTOR",
      link: "https://firebasestorage.googleapis.com/v0/b/sistemaampere.appspot.com/o/clientes%2FRODRIGO%20QUEIROZ-64b57fb9a14dd55e4c7f70d0%2FfotoDisjuntor3067?alt=media&token=b99706d5-2619-4b3b-96f4-d2bbbd89e9c7",
      format: "IMAGEM (.PNG)",
    },
    {
      title: "FOTO DOS CABOS DO PADRÃO",
      link: "https://firebasestorage.googleapis.com/v0/b/sistemaampere.appspot.com/o/clientes%2FRODRIGO%20QUEIROZ-64b57fb9a14dd55e4c7f70d0%2FfotoCabosPadrao1883?alt=media&token=c48ee50a-839b-458b-8732-e425b999d1ac",
      format: "IMAGEM (.PNG)",
    },
    {
      title: "FOTO DO TRANSFORMADOR",
      link: "https://firebasestorage.googleapis.com/v0/b/sistemaampere.appspot.com/o/clientes%2FRODRIGO%20QUEIROZ-64b57fb9a14dd55e4c7f70d0%2FfotoTrafo2927?alt=media&token=61d067ba-f614-4c19-8401-526d6db42689",
      format: "IMAGEM (.PNG)",
    },
    {
      title: "FOTO DA LOCALIZAÇÃO DO TRAFO",
      link: "https://firebasestorage.googleapis.com/v0/b/sistemaampere.appspot.com/o/clientes%2FRODRIGO%20QUEIROZ-64b57fb9a14dd55e4c7f70d0%2FfotoLocalizacaoTrafo9094?alt=media&token=01451e7f-2206-4314-98df-be7c67b41752",
      format: "IMAGEM (.PNG)",
    },
    {
      title: "FOTO DO NÚMERO DO TRANSFORMADOR",
      link: "https://firebasestorage.googleapis.com/v0/b/sistemaampere.appspot.com/o/clientes%2FRODRIGO%20QUEIROZ-64b57fb9a14dd55e4c7f70d0%2FfotoNumeroTrafo9082?alt=media&token=91ce8ef9-99a5-4a55-8e6f-1b6813c7a67a",
      format: "IMAGEM (.PNG)",
    },
    {
      title: "FOTO DA ESTRUTURA DO TELHADO",
      link: "https://firebasestorage.googleapis.com/v0/b/sistemaampere.appspot.com/o/clientes%2FRODRIGO%20QUEIROZ-64b57fb9a14dd55e4c7f70d0%2FfotoEstrutura7331?alt=media&token=8e6f1dc5-ec6b-4e75-9d13-939d7bcd2379",
      format: "IMAGEM (.PNG)",
    },
    {
      title: "FOTO DAS TELHAS",
      link: "https://firebasestorage.googleapis.com/v0/b/sistemaampere.appspot.com/o/clientes%2FRODRIGO%20QUEIROZ-64b57fb9a14dd55e4c7f70d0%2FfotoTelhas3919?alt=media&token=bceef927-37b0-4578-a8a0-58ed623863fb",
      format: "IMAGEM (.PNG)",
    },
    {
      title: "FOTO DA FACHADA",
      link: "https://firebasestorage.googleapis.com/v0/b/sistemaampere.appspot.com/o/clientes%2FRODRIGO%20QUEIROZ-64b57fb9a14dd55e4c7f70d0%2FfotoFaixada975?alt=media&token=546522d4-221d-469c-b30a-06a8c2ee0639",
      format: "IMAGEM (.PNG)",
    },
    {
      title: "FOTO DO LOCAL DE INSTALAÇÃO DO INVERSOR",
      link: "https://firebasestorage.googleapis.com/v0/b/sistemaampere.appspot.com/o/clientes%2FRODRIGO%20QUEIROZ-64b57fb9a14dd55e4c7f70d0%2FfotoLocalInstalacao7236?alt=media&token=ce991ac1-6814-4bd6-ae32-754933fedd2e",
      format: "IMAGEM (.PNG)",
    },
    {
      title: "FOTO DO QUADRO DE DISTRIBUIÇÃO",
      link: "https://firebasestorage.googleapis.com/v0/b/sistemaampere.appspot.com/o/clientes%2FRODRIGO%20QUEIROZ-64b57fb9a14dd55e4c7f70d0%2FfotoQuadroDistribuicao291?alt=media&token=c8d7d7cd-2e70-47b4-845c-776389b7e4d9",
      format: "IMAGEM (.PNG)",
    },
  ],
  dataDeAbertura: "2023-07-18T14:46:02.783Z",
  adaptacaoQGBT: "TRILHO",
  avaliarTelhado: "SIM",
  dpsQGBT: "NÃO",
  espacoQGBT: "SIM",
  infraCabos: "KIT NORMAL",
  obsObras:
    "AVALIAR QGBT ATUAL, SE NECESSARIO AVALIAR NOVO LOCAL DE MONTAGEM COM O CLIENTE, CONFIRMAR ESTRUTURA DO TELHADO, LEVAR FIBROCIMENTO PARA MADEIRA E FERRO.",
  obsSuprimentos: "3 LINHAS COM 4 MODULOS",
  status: "CONCLUIDO",
  suprimentos: [
    {
      insumo: "GRAMPO",
      tipo: "INTERMEDIÁRIO",
      qtde: 18,
      medida: "UNIDADE",
    },
    {
      insumo: "GRAMPO",
      tipo: "FINAL",
      qtde: 12,
      medida: "UNIDADE",
    },
    {
      insumo: "TRILHO",
      tipo: "3,30",
      qtde: 9,
      medida: "UNIDADE",
    },
    {
      insumo: "PAR DE JUNÇÃO",
      tipo: "TRILHO",
      qtde: 3,
      medida: "UNIDADE",
    },
    {
      insumo: "PARAFUSO FIBROCIMENTO",
      tipo: "FERRO",
      qtde: 16,
      medida: "UNIDADE",
    },
    {
      insumo: "PARAFUSO FIBROCIMENTO",
      tipo: "MADEIRA",
      qtde: 8,
      medida: "UNIDADE",
    },
  ],
  concessionaria: "CEMIG",
  fotoDroneDesenho: "NÃO",
  fotoFaixada: "SIM",
  googleEarth: "NÃO",
  medidasLocal: "NÃO",
  modeloCaixa: "CM-1",
  novaAmperagem: "63A",
  novaLigacaoPadrao: "BIFÁSICO",
  obsProjetos: "AUMENTO DE SISTEMA, DESENHO SIMPLES",
  tipoProjeto: "MICRO GERAÇÃO",
  respostaConclusao:
    "APTO PARA SEGUIR COM A NEGOCIAÇÃO COM CUSTOS ADICIONAIS, NECESSARIO PODA E/OU CORTE DAS ARVORES PARA EVITAR O SOMBREMENTO NO SISTEMA FOTOVOLTAICO, A AMPERE ENERGIAS NÃO SE RESPONSABILIZA PELA PERDA GRAÇAS AO POSSIVEL SOMBREAMENTO.",
  respostaEspacoProjeto: "SIM",
  respostaEstruturaInclinacao: "NÃO",
  respostaExplicacaoDetalhada: "NÃO",
  respostaMaderamento: "AVALIAR NA MONTAGEM",
  respostaPadrao: "TROCAR PADRÃO",
  respostaPossuiSombra: "SIM",
  custosAdicionais: [
    {
      categoria: "PADRÃO",
      descricao: "PADRÃO BIFASICO DE 63A CONTRA A REDE",
      qtde: 1,
      grandeza: "UN",
      custo: 0,
      valor: 2560,
    },
    {
      categoria: "ESTRUTURA",
      descricao: "ADEQUAÇÃO DE ESTRUTURA",
      qtde: 1,
      grandeza: "UN",
      custo: 0,
      valor: 1800,
    },
    {
      categoria: "INSTALAÇÃO",
      descricao: "ADEQUAÇÃO DE ESTRUTURA",
      qtde: 1,
      grandeza: "UN",
      custo: 0,
      valor: 1000,
    },
    {
      categoria: "OUTROS",
      descricao: "INSTALAÇÃO DE AR CONDICIONADO",
      qtde: 1,
      grandeza: "UN",
      custo: 0,
      valor: 500,
    },
    {
      categoria: "OUTROS",
      descricao: "OUTROS",
      qtde: 1,
      grandeza: "UN",
      custo: 0,
      valor: 500,
    },
  ],
  dataDeConclusao: "2023-06-05T18:21:30.563Z",
};

function extractTechnicalAnalysisCosts(info) {
  var installationCosts = 0;
  var structureCosts = 0;
  var paCosts = 0;
  var otherCosts = 0;
  var returnObj = {
    installationCosts,
    structureCosts,
    paCosts,
    otherCosts,
  };
  const costArray = info.custosAdicionais;
  if (costArray) {
    returnObj = costArray.reduce((acc, current) => {
      var type;
      console.log("ACCUMULADOR", acc);
      if (current.categoria == "PADRÃO") type = "paCosts";
      if (current.categoria == "ESTRUTURA") type = "structureCosts";
      if (current.categoria == "INSTALAÇÃO") type = "installationCosts";
      if (current.categoria == "OUTROS") type = "otherCosts";

      acc[type] = acc[type] + current.valor;
      return acc;
    }, returnObj);

    return returnObj;
  }
  return returnObj;
}
// animais.reduce((total, elemento) => {
//   if (elemento.tipo === "cao") return (total += elemento.idade *= 7);
//   else return total;
// }, 0);
console.log(extractTechnicalAnalysisCosts(visita));
